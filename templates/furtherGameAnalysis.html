<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.0.0/dist/echarts-wordcloud.js"></script>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="../static/favicon.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../static/css/styles.css" rel="stylesheet"/>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars ms-1"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
                <li class="nav-item"><a class="nav-link" href="#portfolio">Portfolio</a></li>
                <li class="nav-item"><a class="nav-link" href="#team">Team</a></li>
                <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
            </ul>
        </div>
    </div>
</nav>
<!-- Masthead-->
<header class="masthead">
    <div class="container">
        <div class="masthead-subheading">Welcome To Our Twitch Studio!</div>
        <div class="masthead-heading text-uppercase">It's Nice To Meet You</div>
        <a class="btn btn-primary btn-xl text-uppercase" href="#services">Tell Me More</a>
    </div>
</header>
<!-- Services-->
<section class="page-section" id="services">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase">What you can find here?</h2>
            <h3 class="section-subheading text-muted">.</h3>
        </div>
        <div class="row text-center">
            <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-laptop fa-stack-1x fa-inverse"></i>
                        </span>
                <h3 class="my-3">
                    <a href="/renderPredictionPage">Viewer Count Prediction</a>
                </h3>
                <p>If you what to be a new anchor</p>
            </div>
            <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-laptop fa-stack-1x fa-inverse"></i>
                        </span>
                <h3 class="my-3">
                    <a href="/renderClipSearch">Clips analysis</a>
                </h3>
                <p>If you what to see game clips and clips analysis</p>
            </div>
            <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-laptop fa-stack-1x fa-inverse"></i>
                        </span>
                <h3 class="my-3">
                    Game Analysis
                </h3>
                <p>If you what to see game data analysis.</p>
            </div>
        </div>
    </div>
</section>
<section class="page-section bg-light" id="portfolio">
    <div class="container">
        <div class="text-center">
            <h1 class="section-heading text-uppercase" style="margin-bottom: 50px">See some real-time data analysis
                here</h1>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <!-- Portfolio item 1-->
                <div class="portfolio-item">
                    <div>
                        Input the amount of game you want to analyze for word cloud(max: 100): <label
                            for="searchGamesWordCloud"></label><input type="text" id="searchGamesWordCloud">
                        <button onclick="requestWordCloudViewerData()">Submit</button>
                    </div>
                    <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal1">
                        <div class="portfolio-hover">
                            <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
                        </div>
                        <div id="gameWordCloudChart"></div>
                    </a>
                    <div class="portfolio-caption">
                        <div class="portfolio-caption-heading">Hottest Language</div>
                        <div class="portfolio-caption-subheading text-muted">Most Popular Live Rooms in Different
                            Language
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <!-- Portfolio item 5-->
                <div class="portfolio-item">
                    <div>
                        Input amount of game and amount of streams for each game (split by "," max: 100): <label
                            for="searchRank"></label><input
                            type="text" id="searchRank">
                        <button onclick="requestRankViewerData()">Submit</button>
                    </div>
                    <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal2">
                        <div class="portfolio-hover">
                            <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
                        </div>
                        <div id="gameRankChart"></div>
                    </a>
                    <div class="portfolio-caption">
                        <div class="portfolio-caption-heading">Viewer count</div>
                        <div class="portfolio-caption-subheading text-muted">Recent History Trend of Popular game viewer
                            count
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="close-modal" data-bs-dismiss="modal"><img src="../static/img/close-icon.svg" alt="Close modal"/>
            </div>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="modal-body">
                            <!-- Project details-->
                            <h2 class="text-uppercase">Project Name</h2>
                            <div id="gameWordCloudChart1"></div>
                            <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur
                                adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt
                                repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae,
                                nostrum, reiciendis facere nemo!</p>
                            <ul class="list-inline">
                                <li>
                                    <strong>Client:</strong>
                                    Threads
                                </li>
                                <li>
                                    <strong>Category:</strong>
                                    Illustration
                                </li>
                            </ul>
                            <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                <i class="fas fa-times me-1"></i>
                                Close Project
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Portfolio item 2 modal popup-->
<div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="close-modal" data-bs-dismiss="modal"><img src="../static/img/close-icon.svg" alt="Close modal"/>
            </div>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="modal-body">
                            <!-- Project details-->
                            <h2 class="text-uppercase">Project Name</h2>
                        <div id="gameRankChart1"></div>
                            <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur
                                adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt
                                repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae,
                                nostrum, reiciendis facere nemo!</p>
                            <ul class="list-inline">
                                <li>
                                    <strong>Client:</strong>
                                    Explore
                                </li>
                                <li>
                                    <strong>Category:</strong>
                                    Graphic Design
                                </li>
                            </ul>
                            <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                <i class="fas fa-times me-1"></i>
                                Close Project
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<a href="/">Go Back To Main Page</a>

<script type="text/javascript">
    // https://developers.google.com/chart/interactive/docs/gallery/piechart
    // https://www.runoob.com/echarts/echarts-ajax-data.html
    let domain = "https://proj6893.herokuapp.com";
    // let domain = "http://127.0.0.1:5000";
</script>
<script>
    window.onload = function () {
        drawWordCloudChartForGamesViewerCount([]);
        drawRankChartForGamesViewerCount([]);
    }

    let wordCloudChartForGamesViewerCount = echarts.init(document.getElementById('gameWordCloudChart'), null, {
        height: 800,
        width: 1248
    });

    let wordCloudChartForGamesViewerCount1 = echarts.init(document.getElementById('gameWordCloudChart1'), null, {
        height: 800,
        width: 800
    });

    // https://segmentfault.com/a/1190000023022232
    function drawWordCloudChartForGamesViewerCount(dataSet) {
        let option = {
            title: {
                left: 'left',
                text: 'Word Cloud'
            },
            series: [{
                type: 'wordCloud',
                shape: 'diamond',
                left: 'center',
                top: 'center',
                right: null,
                bottom: null,
                width: '70%',
                height: '80%',
                sizeRange: [12, 60],
                rotationRange: [-90, 90],
                rotationStep: 45,
                gridSize: 8,
                drawOutOfBound: false,
                textStyle: {
                    color: function () {
                        return 'rgb(' + [
                            Math.round(Math.random() * 256),
                            Math.round(Math.random() * 256),
                            Math.round(Math.random() * 256)
                        ].join(',') + ')';
                    },
                    normal: {
                        fontFamily: 'sans-serif',
                        fontWeight: 'normal'
                    },
                    emphasis: {
                        shadowBlur: 10,
                        shadowColor: '#333'
                    }
                },
                data: dataSet
            }]
        }
        wordCloudChartForGamesViewerCount.setOption(option);
        wordCloudChartForGamesViewerCount1.setOption(option);
    }

    let rankChartForGamesViewerCount = echarts.init(document.getElementById('gameRankChart'), null, {
        height: 800,
        width: 1248
    });

    let rankChartForGamesViewerCount1 = echarts.init(document.getElementById('gameRankChart1'), null, {
        height: 800,
        width: 800
    });

    // https://echarts.apache.org/examples/zh/editor.html?c=sankey-itemstyle
    function drawRankChartForGamesViewerCount(dataSet) {
        if (dataSet == null || dataSet.length == 0) {
            return;
        }
        let option = {
            title: {
                left: 'left',
                subtext: 'Most real time popular games and their most popular streamers & viewer counts',
            },
            series: [
                {
                    type: 'sankey',
                    left: 50.0,
                    top: 20.0,
                    right: 150.0,
                    bottom: 25.0,
                    data: dataSet.data,
                    links: dataSet.links,
                    lineStyle: {
                        color: 'source',
                        curveness: 0.5
                    },
                    itemStyle: {
                        color: '#1f77b4',
                        borderColor: '#1f77b4'
                    },
                    label: {
                        color: 'rgba(0,0,0,0.7)',
                        fontFamily: 'Arial',
                        fontSize: 10
                    }
                }
            ],
            tooltip: {
                trigger: 'item'
            }
        }
        rankChartForGamesViewerCount.setOption(option);
        rankChartForGamesViewerCount1.setOption(option);
    }


    function requestWordCloudViewerData() {
        let k = document.getElementById("searchGamesWordCloud").value;
        $.ajax({
            url: domain + "/wordCloudForGamesViewer/" + k,
            type: 'GET',
            cache: false,
            processData: false,
            contentType: 'application/json',
            success: function (r) {
                let response = JSON.parse(r);
                console.log(response);
                drawWordCloudChartForGamesViewerCount(response);
            }
        })
    }

    function requestRankViewerData() {
        // let k = document.getElementById("searchRank").value;
        let k = document.getElementById("searchRank").value.split(",")[0];
        let m = document.getElementById("searchRank").value.split(",")[1];
        $.ajax({
            url: domain + "/sankeyForGamesViewer/" + k + "/" + m,
            type: 'GET',
            cache: false,
            processData: false,
            contentType: 'application/json',
            success: function (r) {
                let response = JSON.parse(r);
                console.log(response);
                drawRankChartForGamesViewerCount(response);
            }
        })
    }

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../static/js/scripts.js"></script>
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
<script type="text/javascript"></script>
</body>
</html>
<style>
</style>